(()=>{var e={595:e=>{e.exports={initMoatTracking:function(e,t,r,n){var i=document.createElement("script"),a={events:[],addEvent:function(e){s.sendEvent?(a.events&&(s.sendEvent(a.events),a.events=!1),s.sendEvent(e)):a.events.push(e)}},o=function(t){return function(){var r,n=-1;if(e&&e.getAdVolume&&(r=e.getAdVolume()),"number"==typeof r&&!isNaN(r)&&0<=r&&(n=r),a.addEvent({type:t,adVolume:n}),-1!==p.indexOf(t)&&e&&e.unsubscribe&&!d)for(var i in d=!0,u)if(u.hasOwnProperty&&u.hasOwnProperty(i))try{e.unsubscribe(u[i],i)}catch(e){}}},s={adData:{ids:r,vpaid:e,build:"cc07a80-clean"},dispatchEvent:a.addEvent};r="_moatApi"+Math.floor(1e8*Math.random());var c,l,u={AdStarted:o("AdStarted"),AdStopped:o("AdStopped"),AdSkipped:o("AdSkipped"),AdLoaded:o("AdLoaded"),AdLinearChange:o("AdLinearChange"),AdSizeChange:o("AdSizeChange"),AdExpandedChange:o("AdExpandedChange"),AdSkippableStateChange:o("AdSkippableStateChange"),AdDurationChange:o("AdDurationChange"),AdRemainingTimeChange:o("AdRemainingTimeChange"),AdVolumeChange:o("AdVolumeChange"),AdImpression:o("AdImpression"),AdClickThru:o("AdClickThru"),AdInteraction:o("AdInteraction"),AdVideoStart:o("AdVideoStart"),AdVideoFirstQuartile:o("AdVideoFirstQuartile"),AdVideoMidpoint:o("AdVideoMidpoint"),AdVideoThirdQuartile:o("AdVideoThirdQuartile"),AdVideoComplete:o("AdVideoComplete"),AdUserAcceptInvitation:o("AdUserAcceptInvitation"),AdUserMinimize:o("AdUserMinimize"),AdUserClose:o("AdUserClose"),AdPaused:o("AdPaused"),AdPlaying:o("AdPlaying"),AdError:o("AdError")},d=!1,p=["AdStopped","AdSkipped","AdVideoComplete"];!function(){if(e&&e.subscribe)for(var t in u)u.hasOwnProperty&&u.hasOwnProperty(t)&&e.subscribe(u[t],t)}();try{l=(c=t.ownerDocument).defaultView||c.parentWindow}catch(e){c=document,l=window}return l[r]=s,i.type="text/javascript",t&&t.insertBefore(i,t.childNodes[0]||null),i.src="https://z.moatads.com/"+n+"/moatvideo.js#"+r,s}}},422:e=>{var t,r,n,i,a,o="http://www.iab.net/vmap-1.0",s={XMLHttpRequest:function(){return new XMLHttpRequest},onBeforeSend:function(e,t,r){},defaultVASTAbortLimit:-1};function c(e,t,r,n,i){if(""===i.statusText){var a=s.XMLHttpRequest();a.onreadystatechange=function(){4===a.readyState&&(200===a.status?null!==a.responseXML?r(a.responseXML,t):n(a,t):404===a.status?(a.errorCode="401",n(a,t)):n(a,t))},a.open("GET",e,!0),s.onBeforeSend(e,t,a),a.withCredentials=!1,a.send(null)}else"OK"!==i.statusText?(i.errorCode="401",n(i,t)):n(i,t)}function l(e,t,r,n){var i=s.XMLHttpRequest();i.onreadystatechange=function(){4===i.readyState&&(200===i.status&&null!==i.responseXML?r(i.responseXML,t):c(e,t,r,n,i))},i.open("GET",e,!0),s.onBeforeSend(e,t,i),i.send(null)}function u(e,r,n,i){var a="Reached abort limit of ("+s.defaultVASTAbortLimit+") wrappers.";n=n||function(){};var o=(!i&&0===s.defaultVASTAbortLimit||i&&0===i.abortLimit)&&(n(new Error(a))||!0);o&&setTimeout((function(){"undefined"==typeof buster&&("warn"in console?console.warn(a):console.log(a))}),0),o||l(e,null,(function(e){try{new t(e,r,n,i)}catch(e){console.error(e.toString());for(var a=e.stack.split(/\n/),o=0;o<a.length;o++){var s=a[o];s=(s=s.replace("[arguments not available]","")).replace(/http:\/\/.*?resources\//,""),console.debug("\t"+s)}e&&void 0!==e&&e.errorCode&&void 0!==e.errorCode||(e.errorCode="403"),n(e,i)}}),(function(t){console.error("Failed to load VAST from '"+e+"':",t),t&&void 0!==t&&t.errorCode&&void 0!==t.errorCode||(t.errorCode="100"),n(t,i)}))}function d(e,t){var r;if(this.events={},this.ad=t,null!==e){if(t.impressions.length)for(r=0;r<t.impressions.length;r++)this.addImpressionTracking(t.impressions[r]);if(t.errors.length)for(r=0;r<t.errors.length;r++)this.addErrorTracking(t.errors[r]);if("TrackingEvents"!==e.tagName){if(1!==(e=e.getElementsByTagName("TrackingEvents")).length)return;e=e.item(0)}var n=e.getElementsByTagName("Tracking");for(r=0;r<n.length;r++){var i=n[r].getAttribute("event");if(i){var a=null;"progress"===i&&(i+="-"+(a=n[r].getAttribute("offset"))),this.events[i]=this.events[i]||[];var o={url:n[r].textContent.replace(/\s/g,""),offset:a,event:i};this.events[i].push(o)}}}}function p(e,r,n){this.breaks=[];var i=this;l(e,null,(function(e){for(var a=e.getElementsByTagNameNS(o,"AdBreak"),s=[],c=0;c<a.length;c++){var l=a.item(c),p=l.getAttribute("timeOffset");if(0!==p.indexOf("#")){var h={ad:null,breakId:l.getAttribute("breakId"),tracking:new d(l,null),position:p},f=r.bind(i,i.breaks.length,p),g=l.getElementsByTagNameNS(o,"VASTData");if(g)h.ad=new t(g.item(0).getElementByTagName(null,"VAST").item(0),f);else{var m,v=l.getElementsByTagNameNS(o,"AdTagURI");if(!v){console.error("No supported ad target for break #"+c);continue}!function(e){m=function(t){e.ad=t,null!==t&&f(t)}}(h),u(v.item(0).textContent.replace(/\s/g,""),m)}i.breaks.push(h),s.push(h.position)}}"function"==typeof n&&n(s)}),(function(t,r){console.error("Failed to load VMAP from '"+e+"':",t),n([])}))}function t(e,t,n,i){this.ads=[],this.onAdsAvailable=t,this.onAdsError=n,this.onReceivedErrorCounter=0;var a={errorCode:"101"},o=e.getElementsByTagNameNS("*","Ad"),s=this;if(0!==o.length)for(var c=function(e,t){s.onReceivedErrorCounter++,s.onReceivedErrorCounter!==o.length||n(e,t)},l=0;l<o.length;l++){var d=new r(this,o.item(l),i||null);if(d.isEmpty())c(a,i);else if(this.ads.push(d),!d.hasData()||d.hasSequence()&&!d.isNumber(1)){var p,h=o.item(l).getElementsByTagName("Wrapper").item(0),f=h.getElementsByTagName("VASTAdTagURI");if(0===f.length){c(a,i);continue}f=f.item(0).textContent.replace(/\s/g,""),!function(e,t,r){p=function(n){if(e.onLoaded(n,t),r.onAdsAvailable){var i=r.onAdsAvailable;r.onAdsAvailable=null,i.call(r,r)}}}(d,"true"===h.getAttribute("allowMultipleAds"),s),u(f,p,c,d)}else if(t){var g=this.onAdsAvailable;this.onAdsAvailable=null,g.call(this,this)}}else n()}function r(e,t,r,o){var c,l;if(this.vast=e,this.pod=e,this.parentAd=r,this.onAdAvailable=o,this.abortLimit=r?r.abortLimit>0?r.abortLimit-1:r.abortLimit:s.defaultVASTAbortLimit,this.sequence=null,this.hasContent=!0,this.loaded=!0,this.linear=null,this.companions=[],this.companionsRequired="none",this.nonlinears=[],this.nonlinearsTracking=null,this.errors=[],this.impressions=[],this.extensions=[],this.currentPodAd=this,this.sentError=!1,this.sentImpression=!1,this.properties={},null!==this.parentAd){var u=this.parentAd;if(this.companionsRequired=u.companionsRequired,this.linear=u.linear?u.linear.copy(this):null,u.companions.length)for(c=0;c<u.companions.length;c++)this.companions.push(u.companions[c].copy(this));if(u.extensions.length)for(c=0;c<u.extensions.length;c++)this.extensions.push(u.extensions[c]);if(u.nonlinears.length)for(c=0;c<u.nonlinears.length;c++)this.companions.push(u.nonlinears[c].copy(this));for(l in null!==u.nonlinearsTracking&&(this.nonlinearsTracking=u.nonlinearsTracking.copy(this)),u.properties)u.properties.hasOwnProperty(l)&&(this.properties[l]=u.properties[l])}null===this.nonlinearsTracking&&(this.nonlinearsTracking=new d(null,this)),t.hasAttribute("sequence")&&(this.sequence=parseInt(t.getAttribute("sequence"),10));var p=t.getElementsByTagName("Extensions");if(0!==p.length){var h=p[0].getElementsByTagName("Extension");if(h.length)for(c=0;c<h.length;c++)if("com.rubiconproject.data"===h[c].getAttribute("name")&&"Value"===h[c].getAttribute("type")){var f={},g=h[c].getElementsByTagName("ImpressionId");g.length&&(f.impressionId=g[0].childNodes.length&&g[0].childNodes[0].nodeValue);var m=h[c].getElementsByTagName("DealToken");m.length&&(f.dealToken=m[0].childNodes.length&&m[0].childNodes[0].nodeValue);var v=h[c].getElementsByTagName("PrivacyData");if(v.length){var y=v[0].getElementsByTagName("UserDataHandlingFlags");y.length&&(f.UserDataHandlingFlags=y[0].childNodes.length&&y[0].childNodes[0].nodeValue)}this.extensions.push(f)}}var A=t.getElementsByTagName("InLine");if(0!==A.length||(this.loaded=!1,0!==(A=t.getElementsByTagName("Wrapper")).length)){for(var b=(A=A.item(0)).firstChild;null!==b;){if(1===b.nodeType)switch(b.tagName){case"Creatives":case"InLine":case"Wrapper":case"Impression":case"VASTAdTagURI":case"Error":break;default:this.properties[b.tagName]=b.textContent.replace(/^\s*|\s*$/g,"")}b=b.nextSibling}this.parentAd&&this.parentAd.impressions.length&&(this.impressions=this.parentAd.impressions);var T=A.getElementsByTagName("Impression");for(c=0;c<T.length;c++)this.impressions.push(T.item(c).textContent.replace(/\s/g,""));this.parentAd&&this.parentAd.errors.length&&(this.errors=this.parentAd.errors);var E=A.getElementsByTagName("Error");for(c=0;c<E.length;c++)this.errors.push(E.item(c).textContent.replace(/\s/g,""));var k=A.getElementsByTagName("Creatives");if(0!==k.length)for(k=k.item(0).getElementsByTagName("Creative"),c=0;c<k.length;c++){for(var S,w=k.item(c).firstChild;null!==w&&3===w.nodeType;)w=w.nextSibling;if(null!==w)switch(w.tagName){case"Linear":S=new n(this,w),this.linear?this.linear.augment(S):this.linear=S;break;case"CompanionAds":w.hasAttribute("required")&&(this.companionsRequired=w.getAttribute("required"));case"NonLinearAds":var C=w.tagName.replace("Ads",""),I="Companion"===C?a:i,O="Companion"===C?this.companions:this.nonlinears;if("NonLinear"===C){var P=new d(w,this);this.nonlinearsTracking.augment(P)}for(var x=O.length,N=w.getElementsByTagName(C),R=0;R<N.length;R++){for(S=new I(this,N.item(R)),l=0;l<x;l++){var _=O[l],L=_.attribute("id",S.attribute("id"))===S.attribute("id",_.attribute("id")),V=_.attribute("width",S.attribute("width"))===S.attribute("width",_.attribute("width")),D=_.attribute("height",S.attribute("height"))===S.attribute("height",_.attribute("height")),M=void 0!==_.attribute("id")&&void 0!==S.attribute("id"),j=void 0!==_.attribute("width")&&void 0!==S.attribute("width"),B=void 0!==_.attribute("height")&&void 0!==S.attribute("height");if(L&&V&&D&&(M||j||B)){_.augment(S),S=null;break}}null!==S&&O.push(S)}}}}else this.hasContent=!1}function h(e,t){this.root=t,this.clickThrough=null,"NonLinear"===t.tagName&&(t=t.parentNode),this.tracking=new d(t,e)}function n(e,t){var r;h.call(this,e,t),this.mediaFiles=[],this.clickThrough=null,this.duration=null,this.adParameters=null,this.icons=[];var n=t.getElementsByTagName("VideoClicks");if(n.length){var i=(n=n.item(0)).getElementsByTagName("ClickThrough");for(i.length&&(this.clickThrough=i.item(0).textContent.replace(/\s/g,"")),i=n.getElementsByTagName("ClickTracking"),r=0;r<i.length;r++)this.tracking.addClickTracking(i.item(r).textContent.replace(/\s/g,""))}var a=t.getElementsByTagName("Duration");a.length&&(this.duration=this.timecodeFromString(a.item(0).textContent.replace(/\s/g,"")));var o=t.getElementsByTagName("AdParameters");o.length&&(this.adParameters=o.item(0).textContent);var s=t.getElementsByTagName("MediaFiles");if(s.length){for(s=s.item(0).getElementsByTagName("MediaFile"),r=0;r<s.length;r++){for(var c=s.item(r),l={},u=0;u<c.attributes.length;u++)l[c.attributes[u].name]=c.attributes[u].value;l.src=s.item(r).textContent.replace(/\s/g,""),this.mediaFiles.push(l)}var d=t.getElementsByTagName("Icons");if(null!=d&&d.length>0)for(d=d.item(0).getElementsByTagName("Icon"),r=0;r<d.length;r++){var p=d.item(r),f={program:null,height:0,width:0,xPosition:0,yPosition:0,apiFramework:null,offset:null,duration:0,type:null,staticResource:null,htmlResource:null,iframeResource:null,iconClickThroughURLTemplate:null,iconClickTrackingURLTemplates:[],iconViewTrackingURLTemplate:null};if(f.program=p.getAttribute("program"),f.height=null!=p.getAttribute("height")?parseInt(p.getAttribute("height"),10):0,f.width=null!=p.getAttribute("width")?parseInt(p.getAttribute("width"),10):0,f.xPosition=this.parseXPosition(p.getAttribute("xPosition")),f.yPosition=this.parseYPosition(p.getAttribute("yPosition")),f.apiFramework=p.getAttribute("apiFramework"),f.offset=this.parseDuration(p.getAttribute("offset")),f.duration=this.parseDuration(p.getAttribute("duration")),htmlElement=p.getElementsByTagName("HTMLResource"),null!=htmlElement&&htmlElement.length>0&&(f.type=null==htmlElement[0].getAttribute("creativeType")?"text/html":htmlElement[0].getAttribute("creativeType"),f.htmlResource=this.parseNodeText(htmlElement[0])),iframeElement=p.getElementsByTagName("IFrameResource"),null!=iframeElement&&iframeElement.length>0&&(f.type=null==iframeElement[0].getAttribute("creativeType")?"0":iframeElement[0].getAttribute("creativeType"),f.iframeResource=this.parseNodeText(iframeElement[0])),staticElement=p.getElementsByTagName("StaticResource"),null!=staticElement&&staticElement.length>0&&(f.type=null!=staticElement[0]&&null==staticElement[0].getAttribute("creativeType")?"0":staticElement[0].getAttribute("creativeType"),f.staticResource=this.parseNodeText(staticElement[0])),iconClickElements=p.getElementsByTagName("IconClicks"),iconClickElements&&iconClickElements.length>0){iconClickThroughElem=iconClickElements[0].getElementsByTagName("IconClickThrough"),f.iconClickThroughURLTemplate=this.parseNodeText(iconClickThroughElem[0]),iconClickTrackingElements=iconClickElements[0].getElementsByTagName("IconClickTracking");for(var g=0;g<iconClickTrackingElements.length;g++)f.iconClickTrackingURLTemplates.push(this.parseNodeText(iconClickTrackingElements[g]))}iconViewTrackingElement=p.getElementsByTagName("IconViewTracking"),f.iconViewTrackingURLTemplate=this.parseNodeText(iconViewTrackingElement[0]),this.icons.push(f)}}}d.prototype.copy=function(e){var t=Object.create(d.prototype);for(var r in t.events={},this.events)this.events.hasOwnProperty(r)&&(t.events[r]=[].concat(this.events[r]));return t.ad=e,t},d.prototype.finger=function(e){if("object"!=typeof window||"undefined"==typeof Image||"undefined"!=typeof buster){var t=s.XMLHttpRequest();t.open("get",e,!0),s.onBeforeSend(e,"tracking-pixel",t),t.send()}else{(new Image).src=e}},d.prototype.augment=function(e){for(var t in e.events)e.events.hasOwnProperty(t)&&(this.events[t]?this.events[t]=this.events[t].concat(e.events[t]):this.events[t]=e.events[t])},d.prototype.addClickTracking=function(e){var t={url:e,event:"click",offset:null};this.events.click?this.events.click.push(t):this.events.click=[t]},d.prototype.addImpressionTracking=function(e){if(e){var t={url:e,event:"impression",offset:null};this.events.impression?this.events.impression.push(t):this.events.impression=[t]}},d.prototype.addErrorTracking=function(e){if(e){var t={url:e,event:"error",offset:null};this.events.error?this.events.error.push(t):this.events.error=[t]}},d.prototype.getEventsOfTypes=function(e){var t=[],r=e.indexOf("progress")>-1;for(var n in this.events)this.events.hasOwnProperty(n)&&(e.indexOf(n)>-1||r&&0===n.indexOf("progress-"))&&(t=t.concat(this.events[n]));return t},d.prototype.track=function(e,t){if(this.events[e]&&0!==this.events[e].length){var r,n=[].concat(this.events[e]),i={};for(var a in t)t.hasOwnProperty(a)&&(i["["+a+"]"]=encodeURIComponent(t[a]));if("creativeView"===e){var o=this.ad;if(null!==o&&!o.hasSentImpression())for(o.impressionSent(),r=0;r<o.impressions.length;r++)n.push({url:o.impressions[r]})}for(r=0;r<n.length;r++){for(var s=n[r].url,c=""+parseInt(99999999*Math.random(),10);8!==c.length;)c="0"+c;for(a in i["[CACHEBUSTING]"]=c,i)i.hasOwnProperty(a)&&(s=s.replace(a,i[a]));this.finger(s)}}},p.prototype.onBreakStart=function(e){return this.breaks[e].tracking.track("breakStart"),this.breaks[e].ad},p.prototype.onBreakEnd=function(e){this.breaks[e].tracking.track("breakEnd")},t.prototype.getAd=function(e){var t=null;if(e&&(t=this.getAdWithSequence(1))&&!t.current().isEmpty())return t.current();for(var r=0;r<this.ads.length;r++)if(!this.ads[r].hasSequence()&&!this.ads[r].current().isEmpty())return this.ads[r].current()},t.prototype.getAdWithSequence=function(e){for(var t=0;t<this.ads.length;t++)if(this.ads[t].isNumber(e))return this.ads[t];return null},r.prototype.getTag=function(e,t){return this.properties.hasOwnProperty(e)?this.properties[e]:t},r.prototype.onLoaded=function(e,t){this.pod=e,this.currentPodAd=e.getAd(t),this.currentPodAd.isEmpty()||(this.loaded=!0,this.onAdAvailable&&this.onAdAvailable.call(this,this))},r.prototype.hasSentImpression=function(){return this.sentImpression},r.prototype.impressionSent=function(){this.sentImpression=!0},r.prototype.hasSentError=function(){return this.sentError},r.prototype.errorSent=function(){this.sentError=!0},r.prototype.current=function(){return this.currentPodAd},r.prototype.isNumber=function(e){return this.sequence===e},r.prototype.hasSequence=function(){return null!==this.sequence},r.prototype.isEmpty=function(){return!this.hasContent},r.prototype.hasData=function(){return this.loaded},r.prototype.getNextAd=function(){return this.vast!==this.pod&&(this.currentPodAd=this.currentPodAd.getNextAd(),null!==this.currentPod)?this.currentPodAd.current():this.hasSequence()?this.vast.getAdWithSequence(this.sequence+1).current():null},r.prototype.getLinear=function(){return this.linear},r.prototype.getCompanions=function(){return this.companions},r.prototype.getCompanion=function(e){for(var t=0;t<this.companions.length;t++)if(this.companions[t].attribute("id")===e)return this.companions[t];return null},r.prototype.companionsRequired=function(){return this.companionsRequired},r.prototype.getNonLinears=function(){return this.nonlinears},h.prototype.track=function(e,t,r){this.tracking.track(e,{CONTENTPLAYHEAD:this.timecodeToString(t),ASSETURI:r})},h.prototype.timecodeToString=function(e){return("0"+parseInt(e/3600,10)+":"+("0"+parseInt(e%3600/60,10))+":"+("0"+e%60)).replace(/(^|:|\.)0(\d{2})/g,"$1$2")},h.prototype.timecodeFromString=function(e){return-1===e.indexOf(":")?e:3600*parseInt(e.substr(0,2),10)+60*parseInt(e.substr(3,2),10)+parseInt(e.substr(6,2),10)},h.prototype.getClickThrough=function(){return this.clickThrough},h.prototype.attribute=function(e,t){if(!this.root.hasAttribute(e))return t;var r=this.root.getAttribute(e);switch(e){case"skipoffset":case"duration":case"offset":case"minSuggestedDuration":r=this.timecodeFromString(r)}return r},n.prototype=Object.create(h.prototype),n.prototype.parseDuration=function(e){return null==e||""==e?-1:!isNaN(parseFloat(e))&&isFinite(e)?parseInt(e,10):(durationComponents=e.split(":"),3!=durationComponents.length?-1:(secondsAndMS=durationComponents[2].split("."),seconds=parseInt(secondsAndMS[0],10),2==secondsAndMS.length&&(seconds+=parseFloat("0."+secondsAndMS[1])),minutes=parseInt(60*durationComponents[1],10),hours=parseInt(60*durationComponents[0]*60,10),isNaN(hours)||isNaN(minutes)||isNaN(seconds)||minutes>3600||seconds>60?-1:parseInt(hours,10)+parseInt(minutes,10)+parseInt(seconds,10)))},n.prototype.parseXPosition=function(e){return["left","right"].indexOf(e)>=0?e:null!=e?parseInt(e,10):0},n.prototype.parseYPosition=function(e){return["top","bottom"].indexOf(e)>=0?e:null!=e?parseInt(e,10):0},n.prototype.parseNodeText=function(e){return e&&(e.textContent||e.text||"").trim()},n.prototype.getDuration=function(){return this.duration},n.prototype.copy=function(e){var t=new n(e,this.root);return t.tracking.augment(this.tracking),t},n.prototype.augment=function(e){this.duration=e.duration||this.duration,this.adParameters=e.adParameters||this.adParameters,this.mediaFiles=e.mediaFiles.slice(0)||this.mediaFiles.slice(0),this.icons=e.icons||this.icons,this.tracking.augment(e.tracking),this.clickThrough=e.clickThrough||this.clickThrough},n.prototype.getAllMedias=function(){return this.mediaFiles},n.prototype.getBestMedia=function(e){for(var t=Number.POSITIVE_INFINITY,r=-1,n=0;n<this.mediaFiles.length;n++){var i=this.mediaFiles[n],a=Math.sqrt(Math.pow(e.width-i.width,2)+Math.pow(e.height-i.height,2));if(a<t)t=a,r=n;else if(a===t){var o=this.mediaFiles[r],s=o.bitrate||o.maxBitrate,c=i.bitrate||i.maxBitrate;c&&!s?r=n:e.bitrate&&s&&c?Math.abs(c-e.bitrate)<Math.abs(s-e.bitrate)&&(r=n):c>s&&(r=n)}}return-1===r?null:this.mediaFiles[r]};var f=["start","firstQuartile","midpoint","thirdQuartile","complete","progress","skip"];function g(e,t){var r;h.call(this,e,t),this.resources={iframe:null,html:null,images:{}},(r=t.getElementsByTagName("IFrameResource")).length>0&&(this.resources.iframe=r.item(0).textContent.replace(/\s/g,"")),(r=t.getElementsByTagName("HTMLResource")).length>0&&(this.resources.html=r.item(0).textContent.replace(/\s/g,"")),r=t.getElementsByTagName("StaticResource");for(var n=0;n<r.length;n++)this.resources.images[r.item(n).getAttribute("creativeType")]=r.item(n).textContent.replace(/\s/g,"")}function a(e,t){g.call(this,e,t),this.altText="",g.prototype.extractClicks.call(this,"Companion");var r=t.getElementsByTagName("AltText");r.length&&(this.altText=r.item(0).textContent.replace(/\s/g,""))}function i(e,t){g.call(this,e,t),this.tracking=e.nonlinearsTracking,g.prototype.extractClicks.call(this,"NonLinear")}n.prototype.getTrackingPoints=function(){var e=this.tracking.getEventsOfTypes(f),t=[],r=null;void 0!==this.duration&&this.duration&&(r=this.duration);for(var n=0;n<e.length;n++){var i,a={event:e[n].event,offset:null,percentOffset:null};switch(e[n].event){case"start":a.percentOffset="0%",a.offset=0;break;case"firstQuartile":a.percentOffset="25%",r&&(a.offset=.25*r);break;case"midpoint":a.percentOffset="50%",r&&(a.offset=.5*r);break;case"thirdQuartile":a.percentOffset="75%",r&&(a.offset=.75*r);break;case"complete":a.percentOffset="100%",r&&(a.offset=r);break;case"skip":-1===(i=this.attribute("skipoffset",0)).indexOf("%")?(a.offset=h.prototype.timecodeFromString(i),r&&(a.percentOffset=a.offset/r*100+"%")):(a.percentOffset=i,r&&(a.offset=r*parseInt(a.percentOffset,10)/100));break;default:if(!(i=e[n].offset))continue;"start"===i&&(i="0%"),"end"===i&&(i="100%"),-1===i.indexOf("%")?(a.offset=h.prototype.timecodeFromString(i),r&&(a.percentOffset=a.offset/r*100+"%")):(a.percentOffset=i,r&&(a.offset=r*parseInt(a.percentOffset,10)/100))}t.push(a)}return t.sort((function(e,t){return e.offset&&t.offset?e.offset-t.offset:e.percentOffset&&t.percentOffset?parseInt(e.percentOffset,10)-parseInt(t.percentOffset,10):0})),t},g.prototype=Object.create(h.prototype),g.prototype.augment=function(e){for(var t in this.tracking.augment(e.tracking),this.clickThrough=e.clickThrough||this.clickThrough,this.resources.iframe=e.resources.iframe||this.resources.iframe,this.resources.html=e.resources.html||this.resources.html,e.resources.images)e.resources.images.hasOwnProperty(t)&&(this.resources.images[t]=e.resources.images[t])},g.prototype.getAllResources=function(){return this.resources},g.prototype.extractClicks=function(e){var t;(t=this.root.getElementsByTagName(e+"ClickThrough")).length&&(this.clickThrough=t.item(0).textContent.replace(/\s/g,"")),(t=this.root.getElementsByTagName(e+"ClickTracking")).length&&this.tracking.addClickTracking(t.item(0).textContent.replace(/\s/g,""))},a.prototype=Object.create(g.prototype),a.prototype.copy=function(e){return new a(e,this.root)},a.prototype.augment=function(e){g.prototype.augment.call(this,e),this.altText=e.altText||this.altText},a.prototype.getAltText=function(){return this.altText},i.prototype=Object.create(g.prototype),i.prototype.augment=function(e){g.prototype.augment.call(this,e)},i.prototype.copy=function(e){return new i(e,this.root)},e.exports={vastVmapXHROptions:s,queryVAST:u}}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}(()=>{"use strict";var e=["none","error","warn","log","info"],t=1,n="[vpaid-lite]",i={info:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=console).info.apply(e,[n].concat(r))},log:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=console).log.apply(e,[n].concat(r))},warn:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=console).warn.apply(e,[n].concat(r))},error:function(){for(var e,t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];return(e=console).error.apply(e,[n].concat(r))}};const a=i;function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}function s(e){var t=function(e,t){if("object"!=o(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=o(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==o(t)?t:t+""}function c(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var l,u={play:"play",pause:"pause",volumeChange:"volumechange",timeUpdate:"timeupdate",resize:"resize",loadStart:"loadstart",progress:"progress",suspend:"suspend",abort:"abort",error:"error",emptied:"emptied",stalled:"stalled",loadedMetadata:"loadedmetadata",loadedData:"loadeddata",canPlay:"canplay",canPlayThrough:"canplaythrough",playing:"playing",waiting:"waiting",seeking:"seeking",seeked:"seeked",ended:"ended",durationChange:"durationchange",rateChange:"ratechange"},d={loaded:"AdLoaded",started:"AdStarted",stopped:"AdStopped",skipped:"AdSkipped",skippableStateChange:"AdSkippableStateChange",sizeChange:"AdSizeChange",linearChange:"AdLinearChange",durationChange:"AdDurationChange",expandedChange:"AdExpandedChange",remainingTimeChange:"AdRemainingTimeChange",volumeChange:"AdVolumeChange",impression:"AdImpression",videoStart:"AdVideoStart",videoFirstQuartile:"AdVideoFirstQuartile",videoMidpoint:"AdVideoMidpoint",videoThirdQuartile:"AdVideoThirdQuartile",videoComplete:"AdVideoComplete",clickThru:"AdClickThru",interaction:"AdInteraction",userAcceptInvitation:"AdUserAcceptInvitation",userAcceptInvitationLinear:"AdUserAcceptInvitationLinear",userMinimize:"AdUserMinimize",userClose:"AdUserClose",userCloseLinear:"AdUserCloseLinear",paused:"AdPaused",playing:"AdPlaying",log:"AdLog",error:"AdError",privateInternalError:"@@__private:__internal_error__@@"},p=(c(c(c(c(c(c(c(c(c(c(l={},d.videoStart,"start"),d.videoFirstQuartile,"firstQuartile"),d.videoMidpoint,"midpoint"),d.videoThirdQuartile,"thirdQuartile"),d.videoComplete,"complete"),d.skipped,"skip"),d.started,"creativeView"),d.userAcceptInvitation,"acceptInvitation"),d.userAcceptInvitationLinear,"acceptInvitationLinear"),d.userMinimize,"collapse"),c(c(c(c(c(l,d.userClose,"close"),d.userCloseLinear,"closeLinear"),d.paused,"pause"),d.playing,"resume"),d.clickThru,"click")),h={adLinear:!0,adWidth:0,adHeight:0,adExpanded:!1,adSkippableState:!1,adRemainingTime:0,adDuration:0,adVolume:0,adMuted:!1,adCompanions:"",adIcons:!1,desiredBitrate:null,viewMode:null},f={isInitialized:!1,isVLA:!1,isForcedVLA:!1,mediaFileIsVPAID:!1,VPAIDProxyTarget:null,started:!1,isSkipping:!1,skip:!1,skipdelay:0,stopped:!1,error:[]};function g(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function m(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?g(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):g(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const v=m(m({},{DV_POST_URL:"https://vast.doubleverify.com/v3/vast?_media=3&ctx=25636861&cmp=DV1446011&sid=magnite&plc=magnite-dvot&advid=3891363&autt=3&adsrv=166&ppid=348&aufilter2=IQMV&audeal={DEALID}&auevent={IMPRESSION}&ausite={SITEID}&auxch={EXCHANGE}&pltfrm={ACCOUNTID}&aubndl={APPBUNDLE}&c1={ZONEID}&c2={SIZEID}&auip={AUCTION_IP}&DVPX_PP_AUCTION_UA={AUCTION_UA}&turl={REFERRER}&_api={APIFRAMEWORKS}&_ssm={SERVERSIDE}&_tsm={TIMESTAMP}&gdpr={GDPR}&gdpr_consent={GDPR_CONSENT}&_abm={APPBUNDLE}&_pum={REFERRER}",MOAT_PARTNER_CODE:"rubiconvideo300230105058",WHITEOPS_URL:"https://s.update.rubiconproject.com/2/873648/analytics.js"}),{},{VLA_URL:"https://video-log-api.rubiconproject.com/v1/logs/vpaid-lite",STATS_URL:"https://beacon-nf.rubiconproject.com/beacon/e/",STATS_TOPIC:"vplpixelload",STATS_SAMPLING_RATE:10});var y,A=Date.now(),b={event:{},metadata:{},tracker_success:{},tracker_failure:{}};function T(e,t,r){return e.replace(t,(function(e,t,n,i){return[t,r,i].join("")}))}function E(e){if("string"==typeof e||"number"==typeof e)return e;var t;try{t=JSON.stringify(e)}catch(r){t="object"===o(e)&&e.constructor&&e.constructor.name?"[Object: ".concat(e.constructor.name,"]"):"[[".concat(o(e),"]]")}return t&&(t=T(t,/(\\*"AdParameters\\*":\\*"{)(.+?)(}\\*")/g,"AD PARAMETERS"),t=T(t,/(\\*"vastxml_content\\*":\\*")(.+?)(\\*")/g,"VASTXML_CONTENT")),t}function k(e,t,r){b[e]||(b[e]={}),b[e][t]?b[e][t].push(r):b[e][t]=[r]}function S(e,t){for(var r=Date.now()-A,n=arguments.length,i=new Array(n>2?n-2:0),a=2;a<n;a++)i[a-2]=arguments[a];var o=i.map(E).join(" ");switch(e){case"event":k(e,"".concat(t," ").concat(o),r);break;case"error":k(e,t,{timestamp:r,error:o});break;default:k(e,t,o)}}function w(e,t){var r=v.VLA_URL,n=JSON.stringify({query:e.adParameters.query_parameters,vpaid_log:JSON.stringify(b),force:t});if(navigator.sendBeacon)navigator.sendBeacon(r,n);else{var i=new XMLHttpRequest;i.open("POST",r,!1),i.setRequestHeader("Content-Type","text/plain; charset=utf-8"),i.send(n)}window.removeEventListener("pagehide",y)}var C,I={all:C=C||new Map,on:function(e,t){var r=C.get(e);r?r.push(t):C.set(e,[t])},off:function(e,t){var r=C.get(e);r&&(t?r.splice(r.indexOf(t)>>>0,1):C.set(e,[]))},emit:function(e,t){var r=C.get(e);r&&r.slice().map((function(e){e(t)})),(r=C.get("*"))&&r.slice().map((function(r){r(e,t)}))}},O={},P=function(e,t){return"".concat(t,"--").concat(e.toString())};function x(e,t){return a.log("--\x3e",e,t),S("event","> ".concat(e),t),I.emit(e,Array.isArray(t)?t:[t])}var N=[];function R(e,t){if(""!==e.url){var r=N.length;N[r]=!1;var n=Image&&new Image;n.onload=function(){a.log('|+ tracker "'.concat(t,'" successful: ').concat(e.url)),S("tracker_success",t,e.url),N[r]=!0},n.onerror=i,n.onabort=i,n.src=e.url,a.log('|- tracker "'.concat(t,'" fired: ').concat(e.url))}function i(){a.error('|X tracker "'.concat(t,'" failed: ').concat(e.url)),S("tracker_failure",t,e.url),N[r]=!0}}function _(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,i,a,o,s=[],c=!0,l=!1;try{if(a=(r=r.call(e)).next,0===t){if(Object(r)!==r)return;c=!1}else for(;!(c=(n=a.call(r)).done)&&(s.push(n.value),s.length!==t);c=!0);}catch(e){l=!0,i=e}finally{try{if(!c&&null!=r.return&&(o=r.return(),Object(o)!==o))return}finally{if(l)throw i}}return s}}(e,t)||function(e,t){if(e){if("string"==typeof e)return _(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function V(e){return Object.entries(e).map((function(e){var t=L(e,2),r=t[0],n=t[1];return"".concat(r,"=").concat(encodeURIComponent(n))})).join("&")}function D(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var M,j="",B="",U="",F={init:function(e,t,r,n,i){j="".concat(e).concat(t),M=r,B=n,U=i},notify:function(e){M&&100*Math.random()>parseFloat(M)||F.track(e)},track:function(e,t){var r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?D(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):D(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({account_id:B.account_id,site_id:B.site_id,zone_id:B.zone_id,size_id:B.size_id,event:e},t),n=V(r);R({url:"".concat(j,"/").concat(e,"-").concat(U,"?").concat(n)},e)}};const q=F;function H(e){var t;try{t=window.atob(e)}catch(r){t=window.atob(function(e){var t=e.replace(/-/g,"+").replace(/_/g,"/"),r=t.length%4;if(r){if(1===r)throw new Error("InvalidLengthError: Input base64url string is the wrong length to determine padding");t+=new Array(5-r).join("=")}return t}(e))}return t}var z=window.top;function W(e,t,r,n){var i=!1;try{i=!!e.document}catch(e){}var a={window:e,accessible:i,width:-1,height:-1,referer:null,href:null},o=n;return t&&n<0&&(o=i&&function(e,t){for(var r=t.document.getElementsByTagName(e.tagName),n=!1,i=0;i<r.length;i+=1)if(e===r[i]){n=!0;break}return n}(t,e)?r.length:-1),i&&(a.referer=e.document.referrer,a.width=e.innerWidth,a.height=e.innerHeight,a.href=e.location.href),r.push(a),e===z?{stack:r,needle:n}:W(e.parent,t,r,o)}function X(e,t){var r=W(e,t,[],-1),n=r.stack.length-1,i=2147483647,a=2147483647,o=0;for(-1===r.needle&&(r.needle=0);n>=r.needle&&!r.stack[n].accessible;n-=1)o+=1;for(r.highest=n,r.depth=o,n=r.needle;n<=r.highest;n+=1)i=i>r.stack[n].width?r.stack[n].width:i,a=a>r.stack[n].height?r.stack[n].height:a;return r.minWidth=i,r.minHeight=a,r}var Q=r(422);function G(e){var t=setTimeout((function(){e(),clearTimeout(t)}),0)}function J(e,t){var r=t;null==e||e.hasSentError()||(e.errorSent(),void 0===r&&(r="900"),e.errors.map((function(e){return e.replace(/\[ERRORCODE\]/i,r)})).forEach((function(e){return R({url:e},d.privateInternalError)})))}var Z={probably:1,maybe:2,"":10},Y={"application/javascript":1,"text/javascript":1};function $(e,t){return Z[e.canPlayType(t.type)]}function K(e,t){return Math.abs(t.bitrate-e.desiredBitrate)}function ee(e,t){return Math.pow(t.width-e.adWidth,2)+Math.pow(t.height-e.adHeight,2)}const te=function(e,t,r){var n,i=[],a=[];if(e.forEach((function(e){"VPAID"===e.apiFramework&&Y[e.type]?a.push(e):r.canPlayType(e.type)&&i.push(e)})),n=a.length?a[0]:function(e,t,r){return 0===e.length?null:e.sort((function(e,n){var i=$(r,e)-$(r,n);return 0!==i||t.desiredBitrate>0&&0!=(i=K(t,e)-K(t,n))?i:i=ee(t,e)-ee(t,n)}))[0]}(i,t,r),!n)throw new Error("No playable MediaFile found!");return n};var re=r(595);var ne={rf:"di",account_id:"pp",site_id:"si",zone_id:"c1",size_id:"c2",us_privacy:"us_privacy"};function ie(e){var t,r,n={sr:"magnite.com",md:2,dt:"8736481502993114177000"},i=((t=h.linearAd)&&t.tracking&&t.tracking.events&&t.tracking.events.impression&&(r=L(t.tracking.events.impression.filter((function(e){return e.url.match(/post\.update\.rubiconproject\.com/)})).map((function(e){return new URL(e.url).searchParams.get("pv")})),1)[0]),r);i?n.pv=i:n.ti=(new Date).getTime()+Math.random(),Object.entries(e.adParameters.query_parameters).forEach((function(e){var t=L(e,2),r=t[0],i=t[1],a=ne[r];a&&(n[a]=i)}));var a=V(n),o=document.createElement("script");o.src="".concat(v.WHITEOPS_URL,"?").concat(a),o.async=!0,document.body.appendChild(o),q.track("vpl_whiteops")}function ae(e,t,r){var n=e.adParameters,i={moat:function(){r&&function(e,t){var r=e.adParameters,n=e.videoSlot,i=r.moat_parameters,a=r.query_parameters,o={};i?Object.keys(i).forEach((function(e){var t=e;"moatClientLevel1"===e&&(t="level1"),"moatClientLevel2"===e&&(t="level2"),"moatClientLevel3"===e&&(t="level3"),o[t]=i[e]})):o={level1:a.size_id,zMoatZoneId:a.zone_id,zMoatImpId:t,zMoatRubiconDomain:a.rf,zMoatMeasType:"webplc"},(0,re.initMoatTracking)(e,n,o,v.MOAT_PARTNER_CODE),q.track("vpl_moat")}(e,t)},whiteops:function(){return ie(e)},vla:function(){return function(e){y=function(){return w(e)},window.addEventListener("pagehide",y),f.isVLA=!0,f.isForcedVLA=!1}(e)},forcedvla:function(){f.isVLA||(f.isForcedVLA=!0)}};n.trackers.forEach((function(e){i[e]&&i[e]()}))}function oe(e,t){S("event","proxy.".concat(e),t),a.log("[proxy VAST event]",e,t)}function se(e,t){var r=t.events[e];r&&r.length&&r.forEach((function(t){return R(t,e)}))}function ce(e,t){var r=function(){e.stopAd(),r=function(){return e.stopAdInternal()}};e.subscribe((function(e){oe(d.privateInternalError);var n=t.ad;null===n||n.hasSentError()||(n.errorSent(),function(e){e.errors.map((function(e){var t=f.error;if(t&&t.length>0){var r="900";return void 0!==t[0]&&""!==t[0]&&(r=L(t,1)[0]),e.replace(/\[ERRORCODE\]/i,r)}return e})).forEach((function(e){return R({url:e},d.privateInternalError)}))}(n)),f.error.push(e),r()}),d.privateInternalError),e.subscribe((function(){oe(d.impression);var e=t.ad;null===e||e.hasSentImpression()||(e.impressionSent(),e.impressions.forEach((function(e){return R({url:e},d.impression)})))}),d.impression),e.subscribe((function(){oe(d.volumeChange),se(0===e.getAdVolume()?"mute":"unmute",t)}),d.volumeChange),e.subscribe((function(){oe(d.expandedChange),se(e.getAdExpanded()?"expand":"collapse",t)}),d.expandedChange),Object.entries(p).forEach((function(r){var n=L(r,2),i=n[0],a=n[1];e.subscribe((function(){for(var e=arguments.length,r=new Array(e),n=0;n<e;n++)r[n]=arguments[n];oe(a,r),se(a,t)}),i)}))}function le(e,t,r){f.mediaFileIsVPAID=!0;var n=function(){var e;try{e=window.parent.document}catch(t){e=window.document}var t=e.createElementNS?e.createElementNS("http://www.w3.org/1999/xhtml","iframe"):e.createElement("iframe");return Object.entries({width:"0px",height:"0px",scrolling:"no",frameborder:"0",marginwidth:"0",marginheight:"0",src:"about:blank",style:"margin:auto; display:none;"}).forEach((function(e){var r=L(e,2),n=r[0],i=r[1];t.setAttribute(n,i)})),[t,function(){t&&t.parentNode.removeChild(t),t=null}]}(),i=L(n,2),a=i[0],o=i[1];(e.slot.parentNode||e.slot).appendChild(a);var s=a.contentWindow.document;s.open(),s.write('<!doctype html><html><head></head><body><script src="'.concat(t.src,'"><\/script></body></html>')),s.addEventListener("DOMContentLoaded",function(e,t,r,n){return function(){var i=r.contentWindow.getVPAIDAd();[d.started,d.skippableStateChange,d.sizeChange,d.linearChange,d.durationChange,d.expandedChange,d.remainingTimeChange,d.volumeChange,d.impression,d.videoStart,d.videoFirstQuartile,d.videoMidpoint,d.videoThirdQuartile,d.videoComplete,d.interaction,d.userAcceptInvitation,d.userAcceptInvitationLinear,d.userMinimize,d.userClose,d.userCloseLinear,d.paused,d.playing,d.log].forEach((function(e){i.subscribe((function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return x(e,r)}),e)})),i.subscribe((function(t,r,n){if(n){var i=t||e&&e.linear&&e.linear.clickThrough;x(d.clickThru,[i,r,!!n])}else x(d.clickThru)}),d.clickThru),i.subscribe((function(){try{n()}catch(e){}f.error.push("303");for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];x(d.privateInternalError,t),S("error","vpaid",t),q.track("vpl_error_vpaid")}),d.error),i.subscribe((function(){try{f.VPAIDProxyTarget=null,n(),t.stopAd()}catch(e){G((function(){throw e}))}}),d.stopped),i.subscribe((function(){try{f.VPAIDProxyTarget=null,n(),h.adSkippableState=!0,t.skipAd()}catch(e){G((function(){throw e}))}}),d.skipped),i.subscribe((function(){f.VPAIDProxyTarget=i;for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];x(d.loaded,t)}),d.loaded),i.handshakeVersion(t.version);var a={AdParameters:e&&e.linear&&e.linear.adParameters||""};i.initAd(h.adWidth,h.adHeight,h.viewMode,h.desiredBitrate,a,t.environmentVars)}}(r,e,a,o),!1),s.close()}function ue(e,t){var r,n=!1;try{var i=(r=t.getAd())&&r.linear;if(!i)return function(e){return G((function(){throw G((function(){J(e,"401"),x(d.error,"Unimplemented non-linear ad.")})),new Error("Unimplemented non-linear ad.")}))}(r);!function(e,t,r){var n;if(h.adObj=t,h.linearAd=r,t.extensions&&t.extensions.length){n=t.extensions[0].impressionId||!1,a.info("IMPRESSION ID",n),S("metadata","impression_id",n);var i=!0;"UserDataHandlingFlags"in t.extensions[0]&&"0"!==t.extensions[0].UserDataHandlingFlags&&(a.log("GDPR: no consent given, disable trackers"),i=!1),ae(e,n,i)}ce(e,r.tracking),f.isInitialized=!0}(e,r,i),n=!0;var o=i.clickThrough,s=i.mediaFiles,c=te(s,h,e.videoSlot);"VPAID"===c.apiFramework?le(e,c,r):function(e,t,r){var n=e.slot,i=e.videoSlot;n.addEventListener("click",(function(){x(d.clickThru,[r,"",!0]),e.pauseAd()}),!1),n.style.cursor="pointer",i.src=t.src,h.adDuration=i.duration,h.adRemainingTime=i.duration-i.currentTime,x(d.loaded)}(e,c,o)}catch(t){a.error("VAST callback error, code 403:",t),S("error","vast",403,{message:t.toString(),trace:t.stack}),J(r,"403"),n?x(d.privateInternalError,t&&t.toString()):(f.error.push(t),e.stopAd())}return null}function de(e){if(!e)return window.location.host;var t;try{t=new URL(decodeURIComponent(e)).hostname}catch(e){t=null}return t}function pe(e,t,r){var n=v.DV_POST_URL,i=e.adParameters.query_parameters,o=e.adParameters.doubleverify_parameters,s=e.adParameters.trackers||[];if(!o||!n||0===s.filter((function(e){return"dv"===e})).length)return r(e,t);var c=o.aubndl?function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){var t=document.createElement("script");t.src="mraid.js",t.onload=function(){q.track("vpl_mraid_load"),window.mraid&&"loading"===window.mraid.getState()?window.mraid.addEventListener("ready",e):e()},t.onerror=function(){q.track("vpl_mraid_error"),e()},document.body.appendChild(t)}((function(){return r.apply(void 0,t)}))}:r,l={"{DEALID}":o.audeal,"{IMPRESSION}":o.auevent,"{SITEID}":i.site_id,"{EXCHANGE}":o.auxch,"{APPBUNDLE}":o.aubndl,"{DOMAIN}":de(i.rf),"{ACCOUNTID}":i.account_id,"{ZONEID}":i.zone_id,"{SIZEID}":i.size_id,"{APIFRAMEWORKS}":o._api?o._api.replace(/[[\]]/g,""):"","{SERVERSIDE}":0,"{TIMESTAMP}":Date.now(),"{GDPR}":o.gdpr,"{GDPR_CONSENT}":o.gdpr_consent,"{PAGEURL}":i.rf,"{REFERRER}":i.rf,"{AUCTION_IP}":o.auip,"{AUCTION_UA}":o.DVPX_PP_AUCTION_UA};Object.entries(l).forEach((function(e){var t=L(e,2),r=t[0],i=t[1];n=n.replace(new RegExp(r,"g"),encodeURIComponent(i))})),a.info("DV POST url",n),q.track("vpl_dv");var u=new XMLHttpRequest;return u.open("POST",n),u.send(JSON.stringify({vast:t})),u.onload=function(){200!==u.status?(a.warn("DV: failed to wrap, falling back to original"),c(e,t)):(a.info("DV: successfully wrapped"),c(e,u.response))},u.onerror=function(){a.warn("DV: failed to wrap, falling back to original"),c(e,t)},!0}function he(e){var t;try{t=new URL(e).hostname}catch(e){t=null}return t}function fe(e,t){var r,n,i=(r=window,{stack:(n=X(r,t)).stack,depth:n.depth,minWidth:n.minWidth,minHeight:n.minHeight,url:n.stack[n.highest].href,referrer:n.stack[n.highest].referer,domain:n.stack[n.highest].window.location.host}),a={rf:decodeURIComponent(e.query_parameters.rf),arf:i.depth?i.referrer:i.url},o=he(a.rf),s=he(a.arf);o&&o!==s&&q.track("vpl_rf_mismatch",a)}function ge(e,t){var r="VPAID-LITE | ",n=(new DOMParser).parseFromString(t,"text/xml"),i=Q.vastVmapXHROptions.onBeforeSend;Q.vastVmapXHROptions.onBeforeSend=function(e,t,a){a.withCredentials=!0,e===r&&(Object.defineProperty(a,"responseXML",{value:n}),Object.defineProperty(a,"status",{value:200}),Object.defineProperty(a,"readyState",{value:4}),a.open=function(){},a.send=function(){this.onreadystatechange()}),i(e,t,a)},q.track("vpl_loaded"),fe(e.adParameters,e.videoSlot),(0,Q.queryVAST)(r,(function(t){return ue(e,t)}),(function(t){return function(e,t){var r="901";t&&t.errorCode&&(r=t.errorCode),q.track("vpl_error_init"),a.error("VAST Ad error, code ".concat(r,":"),t),S("error","vast",r,t),J(e,r),f.error.push(t),e.stopAd()}(e,t)}))}var me=[{ev:d.videoComplete,pct:99},{ev:d.videoThirdQuartile,pct:75},{ev:d.videoMidpoint,pct:50},{ev:d.videoFirstQuartile,pct:25},{ev:d.videoStart,pct:0}];var ve=c(c(c({},u.play,(function(){return x(d.playing)})),u.pause,(function(){return x(d.paused)})),u.resize,(function(){return x(d.sizeChange)}));function ye(e){var t=e.videoSlot;ve[u.volumeChange]=function(){var e=t.volume,r=t.muted;h.adVolume!==e&&(h.adVolume=e),h.adMuted!==r&&(h.adMuted=r),x(d.volumeChange)},ve[u.timeUpdate]=function(){var e=t.duration,r=t.currentTime;h.adDuration=e,h.adRemainingTime=e-r,function(e,t){var r=me[me.length-1];r&&100*e/t>=r.pct&&(x(r.ev),me.pop())}(r,e),f.skip&&r>=f.skipdelay&&(f.skip=!1,h.adSkippableState=!0,x(d.skippableStateChange))},ve[u.error]=function(e){x(d.error,"Video ad content error (404)"),S("error","video",e),J(h.adObj,"401")},ve[u.ended]=function(){return e.stopAd()}}function Ae(){var e=!N.length;try{for(var t=0;t<N.length&&(e=N[t]);t+=1);if(e){var r,n=f.error,i=d.stopped;n.length?i=d.error:f.isSkipping&&(i=d.skipped),n[0]&&(r=n[0].toString()),x(i,r),f.isSkipping&&x(d.stopped)}else a.log("waiting for tracker to complete"),setTimeout(Ae,75)}catch(e){x(d.error,e.toString())}}function be(){if(f.isInitialized){var e=this.videoSlot;try{f.stopped=!0,Object.entries(ve).forEach((function(t){var r=L(t,2),n=r[0],i=r[1];return e.removeEventListener(n,i)})),e.ended||e.paused||function(e){var t=N.length,r=!1;try{N[t]=r,e.addEventListener(u.pause,(function r(){try{e.removeEventListener(u.pause,r),N[t]=!0}catch(e){x(d.error,e.toString())}}),!1),e.pause()}catch(e){x(d.error,e.toString())}}(e),Ae()}catch(e){x(d.error,e.toString())}}else a.warn("ad is not initialized, nothing to stop.")}function Te(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var Ee={handshakeVersion:function(){return"2.0"},collapseAd:function(){x(d.expandedChange)},expandAd:function(){x(d.expandedChange)},getAdCompanions:function(){return h.adCompanions},getAdDuration:function(){return h.adDuration},getAdExpanded:function(){return!!h.adExpanded},getAdHeight:function(){return h.adHeight},getAdIcons:function(){return!!h.adIcons},getAdLinear:function(){return!!h.adLinear},getAdRemainingTime:function(){return h.adRemainingTime},getAdSkippableState:function(){return!!h.adSkippableState},getAdVolume:function(){return h.adMuted?0:h.adVolume},getAdWidth:function(){return h.adWidth},initAd:function(e,t,r,n,i,o){a.log("initAd",e,t,r,n,i,o),this.creativeData=i,this.environmentVars=o,this.slot=o.slot,this.videoSlot=o.videoSlot||function(e){var t=document.createElement("video");return(e.slot.parentNode||e.slot).appendChild(t),t}(o);var s={};try{s=JSON.parse(i.AdParameters)}catch(e){throw new Error("Error initializing VPAID-Lite. creativeData.AdParameters is not a valid JSON: ".concat(e.message))}this.adParameters=s,h.desiredBitrate=n,h.viewMode=r,h.adMuted=this.videoSlot.muted,h.adVolume=this.videoSlot.volume,S("metadata","width",e),S("metadata","height",t),S("metadata","view_mode",r),S("metadata","desired_bitrate",n),S("metadata","ad_parameters",s),S("metadata","ad_muted",h.adMuted),S("metadata","ad_volume",h.adVolume),q.init(v.STATS_URL,v.STATS_TOPIC,v.STATS_SAMPLING_RATE,this.adParameters.query_parameters,"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(e){var t=Math.floor(16*Math.random());return("x"===e?t:3&t|8).toString(16)}))),pe(this,H(this.adParameters.vastxml_content),ge)},pauseAd:function(){try{this.videoSlot.pause()}catch(e){x(d.log,e.toString())}},resizeAd:function(e,t,r){h.adWidth=e,h.adHeight=t,h.viewMode=r,"fullscreen"===r&&(h.adWidth=window.innerWidth,h.adHeight=window.innerHeight);try{this.videoSlot.setAttribute("height",h.adHeight),this.videoSlot.setAttribute("width",h.adWidth),this.videoSlot.style.height="".concat(h.adHeight,"px"),this.videoSlot.style.width="".concat(h.adWidth,"px")}catch(e){x(d.log,e.toString())}},resumeAd:function(){try{this.videoSlot.play()}catch(e){x(d.log,e.toString())}},setAdVolume:function(e){var t=e;t=(t=t>1?1:t)<0?0:t,h.adVolume=t,this.videoSlot.volume=h.adVolume},skipAd:function(){!f.stopped&&h.adSkippableState&&(f.isSkipping=!0,this.stopAd())},startAd:function(){var e=this.videoSlot;if(ye(this),!f.mediaFileIsVPAID){var t=function(){e.removeEventListener(u.play,t),Object.entries(ve).forEach((function(t){var r=L(t,2),n=r[0],i=r[1];e.addEventListener(n,i,!1)})),f.started=!0,x(d.started),x(d.impression)};e.addEventListener(u.play,t,!1),G((function(){e.play()}))}},stopAd:be,subscribe:function(e,t,r){var n=P(e,t);O[n]?a.warn("This callback is already subscribed to",t):(O[n]=function(n){return a.log("<--",t,n),S("event","< ".concat(t),n),e.apply(r,n)},I.on(t,O[n]))},unsubscribe:function(e,t){var r=P(e,t);O[r]&&(I.off(t,O[r]),delete O[r])}};Ee.stopAdInternal=be,Object.keys(Ee).forEach((function(e){var t,r;Ee[e]=(t=Ee[e],r=e,function(){var e=this;try{for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];"subscribe"!==r&&"unsubscribe"!==r&&(a.log(">>>","".concat(r,"(").concat(i,")")),S("event","vpaid-lite.".concat(r),i));var s=f.VPAIDProxyTarget;return s&&s[r]?s[r].apply(s,i):t.apply(this,i)}catch(t){a.error(t.toString()),S("error","internal",{message:t.toString(),trace:t.stack}),q.track("vpl_error_internal"),G((function(){throw G((function(){f.error.push(t.toString()),f.isForcedVLA&&w(e,!0),e.stopAd()})),t}))}return null})}));const ke=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(r),!0).forEach((function(t){c(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Te(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({slot:null,videoSlot:null},Ee);!function(){[window.location.href,document.currentScript?document.currentScript.src:""].forEach((function(r){var n=new URL(r).searchParams.get("vpaid-lite-loglevel"),i=e.indexOf(n);i>0&&(t=i)}));var r=function(){};e.slice(t+1).forEach((function(e){i[e]=r}))}(),window.getVPAIDAd=function(){return Object.create(ke)}})()})();